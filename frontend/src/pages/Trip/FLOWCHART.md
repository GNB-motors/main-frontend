# Trip Management - Visual Flowchart

## Application Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TRIP MANAGEMENT PAGE                             â”‚
â”‚                  /trip-management (Main Hub)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚                     â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚  ğŸ“¦ TRIPS  â”‚       â”‚ â›½ REFUEL   â”‚
            â”‚     TAB    â”‚       â”‚ JOURNEYS   â”‚
            â”‚            â”‚       â”‚     TAB    â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                   â”‚                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚  â”‚                  â”‚
   GET /api/weight-slip-trips   GET /api/trips    
        â”‚                    â”‚  â”‚                  â”‚
        â–¼                    â”‚  â”‚                  â–¼
   Weight Slip Trips         â”‚  â”‚          Refuel Journeys
        â”‚                    â”‚  â”‚                  â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚ â”‚                                      â”‚ â”‚
        â”‚ â”‚     Search & Filter Logic            â”‚ â”‚
        â”‚ â”‚  (Vehicle, Driver, Route, ID)        â”‚ â”‚
        â”‚ â”‚                                      â”‚ â”‚
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚                    â”‚                     â”‚
        â–¼                    â–¼                     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Card 1  â”‚         â”‚ Card 2  â”‚         â”‚ Card N   â”‚
    â”‚         â”‚         â”‚         â”‚         â”‚          â”‚
    â”‚Click â—„â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Click   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                        â”‚
        â”‚         Navigate on Click              â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚                                        â”‚
        â–¼                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WeightSlipTripDetail    â”‚    â”‚  TripDetailPage          â”‚
â”‚ /weight-slip/:id        â”‚    â”‚  /trip/:id               â”‚
â”‚                         â”‚    â”‚                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Vehicle & Driver    â”‚ â”‚    â”‚ â”‚ Vehicle & Driver   â”‚   â”‚
â”‚ â”‚ Route & Material    â”‚ â”‚    â”‚ â”‚ Fuel Information   â”‚   â”‚
â”‚ â”‚ Weights             â”‚ â”‚    â”‚ â”‚ Financial Summary  â”‚   â”‚
â”‚ â”‚ Revenue             â”‚ â”‚    â”‚ â”‚ Associated Trips   â”‚   â”‚
â”‚ â”‚ Expenses            â”‚ â”‚    â”‚ â”‚ (Expandable)       â”‚   â”‚
â”‚ â”‚ Timeline            â”‚ â”‚    â”‚ â”‚ Timeline           â”‚   â”‚
â”‚ â”‚                     â”‚ â”‚    â”‚ â”‚                    â”‚   â”‚
â”‚ â”‚ [â† Back]            â”‚ â”‚    â”‚ â”‚ [â† Back]           â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                   â”‚
        â”‚ Click Back                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Trip Management    â”‚
                    â”‚ (Return to Tab)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Tab Switching Flow

```
User Action: Tab Click
        â”‚
        â”œâ”€ Click "ğŸ“¦ Trips" Tab
        â”‚   â”‚
        â”‚   â””â”€â–º setActiveTab('trips')
        â”‚       â”‚
        â”‚       â””â”€â–º useEffect triggered
        â”‚           â”‚
        â”‚           â””â”€â–º fetchWeightSlipTrips()
        â”‚               â”‚
        â”‚               â””â”€â–º WeightSlipTripService.getAll()
        â”‚                   â”‚
        â”‚                   â””â”€â–º GET /api/weight-slip-trips
        â”‚                       â”‚
        â”‚                       â””â”€â–º Display Trip Cards
        â”‚
        â””â”€ Click "â›½ Refuel Journeys" Tab
            â”‚
            â””â”€â–º setActiveTab('refuel')
                â”‚
                â””â”€â–º useEffect triggered
                    â”‚
                    â””â”€â–º fetchRefuelTrips()
                        â”‚
                        â””â”€â–º TripService.getAllTrips()
                            â”‚
                            â””â”€â–º GET /api/trips
                                â”‚
                                â””â”€â–º Display Journey Cards
```

## Search & Filter Flow

```
User Types in Search Bar
        â”‚
        â””â”€â–º searchQuery State Updated
            â”‚
            â”œâ”€â–º If Trips Tab Active:
            â”‚   â”‚
            â”‚   â””â”€â–º filterTrips() runs
            â”‚       â”‚
            â”‚       â””â”€â–º Filter by:
            â”‚           â”œâ”€ Vehicle Registration
            â”‚           â”œâ”€ Driver Name
            â”‚           â”œâ”€ Route Name
            â”‚           â””â”€ Trip ID
            â”‚
            â””â”€â–º If Refuel Tab Active:
                â”‚
                â””â”€â–º filterTrips() runs
                    â”‚
                    â””â”€â–º Filter by:
                        â”œâ”€ Vehicle Registration
                        â”œâ”€ Driver Name
                        â””â”€ Journey ID

        Results: Filtered Trip Cards Display
```

## Card Click Navigation Flow

```
User Clicks Trip Card
        â”‚
        â”œâ”€ If Trips Tab (weight-slip trip):
        â”‚   â”‚
        â”‚   â””â”€â–º handleTripClick(tripId, 'weight-slip')
        â”‚       â”‚
        â”‚       â””â”€â–º navigate(`/trip-management/weight-slip/${tripId}`)
        â”‚           â”‚
        â”‚           â””â”€â–º WeightSlipTripDetailPage Mounts
        â”‚               â”‚
        â”‚               â””â”€â–º useEffect fetches data
        â”‚                   â”‚
        â”‚                   â””â”€â–º WeightSlipTripService.getById(id)
        â”‚                       â”‚
        â”‚                       â””â”€â–º GET /api/weight-slip-trips/:id
        â”‚                           â”‚
        â”‚                           â””â”€â–º Display Full Details
        â”‚
        â””â”€ If Refuel Tab (journey):
            â”‚
            â””â”€â–º handleTripClick(tripId, 'trip')
                â”‚
                â””â”€â–º navigate(`/trip-management/trip/${tripId}`)
                    â”‚
                    â””â”€â–º TripDetailPage Mounts
                        â”‚
                        â””â”€â–º useEffect fetches data
                            â”‚
                            â””â”€â–º TripService.getTripById(id)
                                â”‚
                                â””â”€â–º GET /api/trips/:id
                                    â”‚
                                    â””â”€â–º Display Full Details
```

## Cross-Navigation Flow

```
From TripDetailPage (Journey)
        â”‚
        â”œâ”€ Can click Back
        â”‚   â”‚
        â”‚   â””â”€â–º navigate('/trip-management')
        â”‚       â”‚
        â”‚       â””â”€â–º Return to Trip Management (Refuel Tab)
        â”‚
        â””â”€ Can click on Associated Trip Card
            â”‚
            â””â”€â–º navigate(`/trip-management/weight-slip/${tripId}`)
                â”‚
                â””â”€â–º WeightSlipTripDetailPage Opens
                    â”‚
                    â””â”€â–º Shows detailed trip info
                        â”‚
                        â””â”€â–º Can click Back
                            â”‚
                            â””â”€â–º navigate('/trip-management')
                                â”‚
                                â””â”€â–º Return to Trip Management
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend API                           â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ /weight-slip-trips â”‚    â”‚      /trips        â”‚       â”‚
â”‚  â”‚                    â”‚    â”‚                    â”‚       â”‚
â”‚  â”‚ Returns:           â”‚    â”‚ Returns:           â”‚       â”‚
â”‚  â”‚ - Weight slip trip â”‚    â”‚ - Refuel journey   â”‚       â”‚
â”‚  â”‚ - Material type    â”‚    â”‚ - Vehicle info     â”‚       â”‚
â”‚  â”‚ - Weights          â”‚    â”‚ - Total fuel       â”‚       â”‚
â”‚  â”‚ - Revenue          â”‚    â”‚ - Weight slip IDs  â”‚       â”‚
â”‚  â”‚ - Expenses         â”‚    â”‚ - Financial data   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                  â”‚
              â–¼                                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  TripService     â”‚        â”‚ WeightSlip       â”‚
    â”‚  Service Layer   â”‚        â”‚ TripService      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                           â”‚
             â”‚    Data Transformation    â”‚
             â”‚                           â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Component State/Props        â”‚
        â”‚                               â”‚
        â”‚  - weightSlipTrips: []        â”‚
        â”‚  - refuelTrips: []            â”‚
        â”‚  - filteredTrips: []          â”‚
        â”‚  - searchQuery: string        â”‚
        â”‚  - activeTab: string          â”‚
        â”‚  - loading states             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  UI Render                    â”‚
        â”‚                               â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚  Trip Cards Grid        â”‚  â”‚
        â”‚  â”‚  - Display trip data    â”‚  â”‚
        â”‚  â”‚  - Status badges        â”‚  â”‚
        â”‚  â”‚  - Click handlers       â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     TripManagementPage State            â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ activeTab: 'trips' | 'refuel'     â”‚   â”‚
â”‚ â”‚ searchQuery: string               â”‚   â”‚
â”‚ â”‚ weightSlipTrips: Trip[]           â”‚   â”‚
â”‚ â”‚ refuelTrips: Trip[]               â”‚   â”‚
â”‚ â”‚ loadingWeightSlip: boolean        â”‚   â”‚
â”‚ â”‚ loadingRefuel: boolean            â”‚   â”‚
â”‚ â”‚ weightSlipPagination: {...}       â”‚   â”‚
â”‚ â”‚ refuelPagination: {...}           â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚ Effects:                                â”‚
â”‚ â”œâ”€ On mount: Remove page padding      â”‚
â”‚ â”œâ”€ On activeTab change: Fetch data    â”‚
â”‚ â””â”€ On navbar event: Start new trip    â”‚
â”‚                                         â”‚
â”‚ Computed Values:                        â”‚
â”‚ â”œâ”€ filteredTrips: Filtered by search  â”‚
â”‚ â””â”€ colors/formats: Computed for UI    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Error Handling Flow

```
API Call Fails
        â”‚
        â””â”€â–º try-catch block catches error
            â”‚
            â”œâ”€â–º setError(error message)
            â”œâ”€â–º console.error() logs it
            â””â”€â–º toast.error() shows notification
                â”‚
                â””â”€â–º User sees error message
                    â”‚
                    â””â”€â–º Can retry or go back
```

---

This comprehensive flowchart shows how all parts of the Trip Management system work together to provide a seamless user experience.
